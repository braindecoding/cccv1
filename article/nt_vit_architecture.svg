<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Gradients for visual appeal -->
    <linearGradient id="eegGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="fmriGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="transformerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#229954;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="attentionGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e67e22;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="600" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2"/>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">
    NT-ViT: Neural Transcoding Vision Transformers for EEG-to-fMRI Synthesis
  </text>
  
  <!-- EEG Input -->
  <g id="eeg-input">
    <rect x="50" y="100" width="120" height="80" fill="url(#eegGradient)" stroke="#2980b9" stroke-width="2" rx="5"/>
    <text x="110" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">EEG Input</text>
    <text x="110" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Raw Signals</text>
    <text x="110" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(T × C)</text>
    
    <!-- EEG waveform visualization -->
    <g transform="translate(60, 190)">
      <path d="M0,0 Q25,-15 50,0 T100,0" stroke="#3498db" stroke-width="2" fill="none"/>
      <path d="M0,10 Q25,25 50,10 T100,10" stroke="#3498db" stroke-width="2" fill="none"/>
      <path d="M0,20 Q25,5 50,20 T100,20" stroke="#3498db" stroke-width="2" fill="none"/>
    </g>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M180 140 L220 140" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Patch Embedding -->
  <g id="patch-embedding">
    <rect x="230" y="100" width="120" height="80" fill="url(#transformerGradient)" stroke="#229954" stroke-width="2" rx="5"/>
    <text x="290" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Patch</text>
    <text x="290" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Embedding</text>
    <text x="290" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Temporal Patches</text>
    <text x="290" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(P × D)</text>
    
    <!-- Patch visualization -->
    <g transform="translate(240, 190)">
      <rect x="0" y="0" width="15" height="15" fill="#27ae60" opacity="0.7"/>
      <rect x="20" y="0" width="15" height="15" fill="#27ae60" opacity="0.7"/>
      <rect x="40" y="0" width="15" height="15" fill="#27ae60" opacity="0.7"/>
      <rect x="60" y="0" width="15" height="15" fill="#27ae60" opacity="0.7"/>
      <rect x="80" y="0" width="15" height="15" fill="#27ae60" opacity="0.7"/>
    </g>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M360 140 L400 140" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Transformer Encoder -->
  <g id="transformer-encoder">
    <rect x="410" y="80" width="120" height="120" fill="url(#transformerGradient)" stroke="#229954" stroke-width="2" rx="5"/>
    <text x="470" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Transformer</text>
    <text x="470" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Encoder</text>
    <text x="470" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Multi-Head</text>
    <text x="470" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Self-Attention</text>
    <text x="470" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">L × (P × D)</text>
    
    <!-- Attention heads visualization -->
    <g transform="translate(420, 210)">
      <circle cx="20" cy="0" r="8" fill="#27ae60" opacity="0.8"/>
      <circle cx="40" cy="0" r="8" fill="#27ae60" opacity="0.8"/>
      <circle cx="60" cy="0" r="8" fill="#27ae60" opacity="0.8"/>
      <circle cx="80" cy="0" r="8" fill="#27ae60" opacity="0.8"/>
      <text x="50" y="-15" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#27ae60">Attention Heads</text>
    </g>
  </g>
  
  <!-- Arrow 3 -->
  <path d="M540 140 L580 140" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Cross-Modal Attention -->
  <g id="cross-modal-attention">
    <rect x="590" y="80" width="120" height="120" fill="url(#attentionGradient)" stroke="#e67e22" stroke-width="2" rx="5"/>
    <text x="650" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Cross-Modal</text>
    <text x="650" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Attention</text>
    <text x="650" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">EEG → fMRI</text>
    <text x="650" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Mapping</text>
    <text x="650" y="175" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(P × D_fmri)</text>
    
    <!-- Cross-modal mapping visualization -->
    <g transform="translate(600, 210)">
      <path d="M10,0 Q50,-10 90,0" stroke="#f39c12" stroke-width="3" fill="none"/>
      <path d="M10,5 Q50,15 90,5" stroke="#f39c12" stroke-width="3" fill="none"/>
      <circle cx="10" cy="2.5" r="3" fill="#3498db"/>
      <circle cx="90" cy="2.5" r="3" fill="#e74c3c"/>
      <text x="50" y="-15" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#f39c12">Neural Mapping</text>
    </g>
  </g>
  
  <!-- Arrow 4 -->
  <path d="M720 140 L760 140" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- fMRI Synthesis Decoder -->
  <g id="fmri-decoder">
    <rect x="770" y="100" width="120" height="80" fill="url(#fmriGradient)" stroke="#c0392b" stroke-width="2" rx="5"/>
    <text x="830" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">fMRI Synthesis</text>
    <text x="830" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Decoder</text>
    <text x="830" y="155" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Reconstruction</text>
    <text x="830" y="170" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">(V × R)</text>
    
    <!-- fMRI reconstruction visualization -->
    <g transform="translate(780, 190)">
      <rect x="0" y="0" width="12" height="12" fill="#e74c3c" opacity="0.8"/>
      <rect x="15" y="0" width="12" height="12" fill="#e74c3c" opacity="0.6"/>
      <rect x="30" y="0" width="12" height="12" fill="#e74c3c" opacity="0.9"/>
      <rect x="45" y="0" width="12" height="12" fill="#e74c3c" opacity="0.7"/>
      <rect x="60" y="0" width="12" height="12" fill="#e74c3c" opacity="0.8"/>
      <rect x="75" y="0" width="12" height="12" fill="#e74c3c" opacity="0.5"/>
      <text x="37.5" y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#e74c3c">Synthetic fMRI</text>
    </g>
  </g>
  
  <!-- Data Flow Labels -->
  <text x="200" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Temporal</text>
  <text x="200" y="142" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Segmentation</text>
  
  <text x="380" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Feature</text>
  <text x="380" y="142" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Extraction</text>
  
  <text x="560" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Modal</text>
  <text x="560" y="142" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Translation</text>
  
  <text x="740" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Signal</text>
  <text x="740" y="142" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7f8c8d">Synthesis</text>
  
  <!-- Integration with CortexFlow -->
  <g id="cortexflow-integration">
    <rect x="350" y="300" width="300" height="60" fill="#9b59b6" stroke="#8e44ad" stroke-width="2" rx="5" opacity="0.9"/>
    <text x="500" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Integration with CortexFlow</text>
    <text x="500" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">Synthetic fMRI → CLIP-Guided Encoder → Visual Reconstruction</text>
  </g>
  
  <!-- Connection to CortexFlow -->
  <path d="M830 180 Q830 220 650 250 Q500 280 500 300" stroke="#9b59b6" stroke-width="3" fill="none" stroke-dasharray="5,5"/>
  
  <!-- Technical Specifications -->
  <g id="tech-specs">
    <rect x="50" y="400" width="900" height="150" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1" rx="5"/>
    <text x="70" y="425" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2c3e50">Technical Specifications:</text>
    
    <text x="70" y="450" font-family="Arial, sans-serif" font-size="11" fill="#34495e">
      <tspan x="70" dy="0">• EEG Input: Temporal sequences (T × C) where T = time steps, C = channels</tspan>
      <tspan x="70" dy="20">• Patch Embedding: Temporal patches of size P with embedding dimension D</tspan>
      <tspan x="70" dy="20">• Transformer Encoder: L layers with multi-head self-attention (8 heads)</tspan>
      <tspan x="70" dy="20">• Cross-Modal Attention: Learned mapping from EEG embedding space to fMRI space</tspan>
      <tspan x="70" dy="20">• fMRI Synthesis: Reconstruction to voxel space (V × R) compatible with CortexFlow input</tspan>
      <tspan x="70" dy="20">• Training: Paired EEG-fMRI data with contrastive learning and reconstruction loss</tspan>
    </text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="750" y="400" width="200" height="100" fill="white" stroke="#bdc3c7" stroke-width="1" rx="3"/>
    <text x="760" y="420" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">Legend:</text>
    
    <rect x="760" y="430" width="15" height="10" fill="url(#eegGradient)"/>
    <text x="780" y="439" font-family="Arial, sans-serif" font-size="10" fill="#34495e">EEG Processing</text>
    
    <rect x="760" y="445" width="15" height="10" fill="url(#transformerGradient)"/>
    <text x="780" y="454" font-family="Arial, sans-serif" font-size="10" fill="#34495e">Transformer Layers</text>
    
    <rect x="760" y="460" width="15" height="10" fill="url(#attentionGradient)"/>
    <text x="780" y="469" font-family="Arial, sans-serif" font-size="10" fill="#34495e">Cross-Modal Attention</text>
    
    <rect x="760" y="475" width="15" height="10" fill="url(#fmriGradient)"/>
    <text x="780" y="484" font-family="Arial, sans-serif" font-size="10" fill="#34495e">fMRI Synthesis</text>
  </g>
</svg>
